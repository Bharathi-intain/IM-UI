"use strict";(self.webpackChunkwsfs=self.webpackChunkwsfs||[]).push([[2684],{42684:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var o=a(52536),n=a(23132),l=a.n(n),s=a(29496),i=(a(20304),a(46057)),r=a(23124),c=(a(91156),a(74428)),m=(a(33912),a(37048)),d=(a(58124),a(28)),p=a(67784),u=(a(25104),a(39960),a(98656)),h=a.n(u),b=a(42840),g=a(55792),f=a(12552),E=a(45652),v=a(89240),y=(a(79820),a(54563));class C extends n.Component{constructor(e){super(e),(0,o.c)(this,"onOpenModal",(()=>{console.log("inside modal1"),this.setState({open1:!0})})),(0,o.c)(this,"onCloseModal",(()=>{this.setState({open1:!1})})),(0,o.c)(this,"onOpenModal1",(()=>{console.log("inside modal1"),this.setState({open2:!0,file1:""})})),(0,o.c)(this,"onCloseModal1",(()=>{this.setState({open2:!1})})),(0,o.c)(this,"onOpenModal2",(()=>{console.log("inside modal1"),this.setState({open3:!0,file2:""})})),(0,o.c)(this,"onCloseModal2",(()=>{this.setState({open3:!1})})),(0,o.c)(this,"onSubmit1",(e=>{e.preventDefault(),this.UpdateDealUW()})),(0,o.c)(this,"onSubmit2",(e=>{e.preventDefault(),this.uploadPreclosingXl()})),(0,o.c)(this,"handleOnChange1",(e=>{this.setState({file1:e.target.files[0],filename1:e.target.files[0].name}),console.log("eeee",e.target.files[0].name),console.log("file1",e.target.files[0])})),(0,o.c)(this,"handleOnChange2",(e=>{this.setState({file2:e.target.files[0],filename2:e.target.files[0].name}),console.log("eeee",e.target.files[0].name),console.log("file2",e.target.files[0])})),(0,o.c)(this,"handleClicks",(()=>{console.log("hello we have clicked the button"),window.location.assign("/admin/uw_deal_details")})),(0,o.c)(this,"downloadDealTemplate",(async()=>{!function(e,t){const a=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.href=a,o.setAttribute("download",t),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)}((await(0,f.uE)(this.state.token)).data,"Structuring Template.xls")})),(0,o.c)(this,"DownloadPreclosingTemplate",(async()=>{let e={};e.poolid=this.state.dealId,e.token=this.state.token;const t=await(0,f.UR)(e),a=this.state.dealId+".xls";!function(e,t){const a=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.href=a,o.setAttribute("download",t),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)}(t.data,a)})),(0,o.c)(this,"UpdateDealUW",(async()=>{console.log("uplaodpooluw");const e=new FormData;e.append("filename",this.state.file1),e.append("dealid",this.state.dealId),e.append("underwriterid",this.state.UserId),console.log("newdata",e),this.setState({formLoader:!0});const t=await(0,f.OO)(e,this.state.token);if(200===t.status)if(console.log("upload--",t),!0===t.data.success){this.setState({formLoader:!1});const e="Deal upload success";this.props.enqueueSnackbar(e,{variant:"info",autoHideDuration:2e3}),this.onCloseModal1()}else{this.setState({formLoader:!1});const e="Something went wrong, please try again";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:2e3})}else alert("Failed upload")})),(0,o.c)(this,"PublishUW",(async()=>{var e={};e.dealid=this.state.dealId,e.status="Awaiting Approval",console.log("datata",e),this.setState({formLoader:!0,publishstatus:!0}),e.token=this.state.token;if(200==(await(0,f.Ez)(e)).status){this.setState({formLoader:!1,publishstatus:!1});const e="Deal Update Status Success";this.props.enqueueSnackbar(e,{variant:"info",autoHideDuration:3e3}),this.onCloseModal()}else{this.setState({formLoader:!1,publishstatus:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"uploadPreclosingXl",(async()=>{console.log("uplaodpooluw");const e=new FormData;e.append("filename",this.state.file2),e.append("poolid",this.state.dealId),console.log("newdata",e),this.setState({formLoader:!0});const t=await(0,f.In)(e,this.state.token);if(200===t.status)if(console.log("upload--",t),!0===t.data.success){this.setState({formLoader:!1});const e=t.data.message;this.props.enqueueSnackbar(e,{variant:"info",autoHideDuration:2e3}),this.onCloseModal2()}else{this.setState({formLoader:!1});const e=t.data.message;this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:5e3})}else alert("Failed upload")})),(0,o.c)(this,"onchange",(e=>{this.setState({searchText:e.target.value,searchType:!0}),console.log("search: e.target.value",e.target.value)})),(0,o.c)(this,"getdealstatusbydealid",(async()=>{var e={};e.dealid=this.state.dealId,console.log("datata",e),this.setState({screenloader:!0}),e.token=this.state.token;const t=await(0,f.Ck)(e);if(200==t.status)this.setState({screenloader:!1,dealstatus:t.data.status});else{this.setState({screenloader:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"getMuiTheme",(()=>(0,v.c)({typography:{useNextVariants:!0},overrides:{MUIDataTable:{root:{border:"none !important"}},MUIDataTableBodyRow:{root:{"&:nth-child(even)":{backgroundColor:"#FAFAFA !important"},"&.Mui-selected":{backgroundColor:"white !important"}},hoverCursor:{cursor:"auto !important"}},MuiTableCell:{root:{fontFamily:"Mulish, sans-serif !important",padding:"20px",fontSize:"0.980rem !important"}},MUIDataTableBodyCell:{root:{fontFamily:"Mulish, sans-serif !important",fontWeight:"400 !important",fontSize:"15px !important",borderBottom:"none !important"}},MuiCircularProgress:{colorSecondary:{color:"#048c88 !important"}},MUIDataTableHeadCell:{root:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingBottom:"5px !important",paddingTop:"5px !important",paddingLeft:"15px !important"},toolButton:{fontWeight:"600 !important",fontSize:"15px !important",backgroundColor:"none !important",padding:"none !important",marginLeft:"none !important",textTransform:"none !important",border:"none !important",borderRadius:"none !important"}},MUIDataTableToolbar:{root:{fontFamily:"Mulish, sans-serif !important",paddingLeft:"5px !important",paddingRight:"5px !important"},titleText:{fontFamily:"Mulish, sans-serif !important",fontSize:"28px",color:"#212121",fontWeight:"600",fontFamily:"arial",marginBottom:"20px",marginTop:"20px"},icon:{color:"#018E82",paddingRight:"14px !important","&:hover":{color:"#018E82 !important"}},iconActive:{color:"#018E82 !important"}},MuiButton:{contained:{backgroundColor:"#FFC000 !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},outlined:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"#fff !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},label:{fontSize:"15px !important",fontWeight:"600 !important",fontFamily:"Mulish, sans-serif !important"},textPrimary:{color:"#018E82 !important"}},MUIDataTablePagination:{tableCellContainer:{borderBottom:"none !important"},navContainer:{justifyContent:"center"},toolbar:{paddingLeft:"50px !important"}},MuiTableSortLabel:{icon:{color:"#018E82 !important"},active:{color:"#018E82 !important"}},MuiTablePagination:{caption:{color:"#8C8C8C",marginRight:"".concat(this.state.tableData.length<10?"-122":"-132","px"),fontSize:"0.90rem"}},MuiIconButton:{colorInherit:{color:"#018E82 !important",zIndex:"1000",marginRight:"60px",paddingLeft:"-25px"}},MUIDataTable:{paper:{boxShadow:"none !important"},responsiveBase:{border:"1px solid #212121 !important",borderRadius:"10px !important"}},MUIDataTableBody:{emptyTitle:{fontSize:"15px !important",fontFamily:"Mulish, sans-serif !important",color:"#8C8C8C !important"}}}}))),this.state={selectedRecords:[],eligibleloans:{},tableData:[],loading:!1,getLoansLoader:!1,screenloader:!1,open:!1,openPopup:!1,selectedLoanId:[],searchText:"",rowsSelected:null,open1:!1,open2:!1,open3:!1,file1:"",file2:"",UserId:sessionStorage.getItem("userid"),dealId:sessionStorage.getItem("dealId"),poolName:sessionStorage.getItem("poolname"),activeInsights1:!0,activeInsights2:!1,activeInsights3:!1,showSearchBox:!1,publishstatus:!1,token:sessionStorage.getItem("token")}}async selectedpoolid(e){const t=[];for(var a=0;a<e.length;a++){var o=e[a];let n=this.state.tableData[o].dealid;t.push(n)}console.log("selected Loans",t),sessionStorage.setItem("rundd",JSON.stringify(t))}async componentDidMount(){var e=window.location.pathname;sessionStorage.setItem("component",e),this.getdealstatusbydealid()}render(){var e,t;const{classes:a}=this.props;this.onRowClick,this.onRowsSelect,this.state.rowsSelected,E.TrainRounded,this.state.searchText,!0===this.state.loading&&r.c;return l().createElement(l().Fragment,null,l().createElement("div",{className:"page"},l().createElement(s.c,{activeComponent:"UW_Dashboard_Pools"}),l().createElement("div",{className:"content1"},1==this.state.screenloader?l().createElement(c.c,null):l().createElement(l().Fragment,null,l().createElement("div",{className:"page-content"},l().createElement("div",{className:"row rowreview1"},l().createElement("div",{className:"investor-heading-container"},l().createElement("div",{className:"arrowtextclass"},l().createElement(y.c,{onClick:this.handleClicks,className:"left-arrow-muis1 toolsmuis"}),l().createElement("h1",{className:"headerdashboard"},"Tools"))),l().createElement("div",null,l().createElement("div",{className:"dashboard-top-right-container1"},"Open"===(null===(e=this.state)||void 0===e?void 0:e.dealstatus)?l().createElement(i.c,{variant:"contained",color:"primary",type:"submit",disabled:!0},"Deal Published"):"Awaiting Approval"===(null===(t=this.state)||void 0===t?void 0:t.dealstatus)?l().createElement(i.c,{variant:"contained",color:"primary",type:"submit",disabled:!0},"Awaiting Issuer Approval"):l().createElement(i.c,{variant:"contained",color:"primary",type:"submit",onClick:this.onOpenModal.bind(this)},"Publish Deal to Issuer")))))),l().createElement("div",{className:"tool-main-container"},l().createElement("div",{className:"tool-template-container"},l().createElement("div",{className:"tool-template-text-container"},l().createElement("h3",null,"Loan Template"),l().createElement("p",null,"Use this Excel template to add additional loan properties to the charts on the main page.")),l().createElement("div",{className:"tool-template-right-container"},l().createElement("button",{className:"tool-button",onClick:this.DownloadPreclosingTemplate},"Download"),l().createElement("button",{className:"tool-button-css",onClick:this.onOpenModal2.bind(this)},"Upload"))),l().createElement("hr",{className:"tool-hr"}),l().createElement("div",{className:"tool-template-container"},l().createElement("div",{className:"tool-template-text-container"},l().createElement("h3",null,"Structuring Template"),l().createElement("p",null,"Use this Excel template to auto populate the different sections on the main page.")),l().createElement("div",{className:"tool-template-right-container"},l().createElement("button",{className:"tool-button",onClick:this.downloadDealTemplate},"Download"),l().createElement("button",{className:"tool-button-css",onClick:this.onOpenModal1.bind(this)},"Upload"))))),l().createElement("div",{id:"modal1"},l().createElement(h(),{isOpen:this.state.open1,onRequestClose:this.onCloseModal,contentLabel:"Minimal Modal Example",style:b.YT},l().createElement(l().Fragment,null,l().createElement("div",{className:"modalPopup2"},l().createElement("h2",null,"Are you sure, you want to Publish the Deal?"),l().createElement("div",{className:"modalshiftcontent"},l().createElement("h6",{className:"card1__title"},"Once published, this Deal will become visible to Issuer."),l().createElement("div",{className:"modalsubmit"},l().createElement("div",{className:"submitbuttonbg"},l().createElement("div",{className:"row"},l().createElement("div",{className:"row justify-content-end1"},l().createElement("button",{type:"button",className:"popupbutton1",onClick:this.onCloseModal}," ","Cancel"," "),l().createElement(i.c,{variant:"contained",color:"primary",disabled:1==this.state.publishstatus,onClick:()=>this.PublishUW()},"Publish",!0===this.state.formLoader?l().createElement(p.c,{size:"22px",color:"primary"}):""))))),!1===this.state.getLoansLoader?"":l().createElement(g.c,null)))))),l().createElement("div",{id:"modal1"},l().createElement(h(),{isOpen:this.state.open2,onRequestClose:this.onCloseModal1,contentLabel:"Minimal Modal Example",style:b.YT},l().createElement(l().Fragment,null,l().createElement("div",{className:"modalPopup2"},l().createElement("div",{className:"popupTitle"},l().createElement("h2",null,"Upload the Document"),l().createElement("button",{type:"button",className:"closePopup",style:{minWidth:"30px"},onClick:this.onCloseModal1}," ",l().createElement(m.default,null)," ")),l().createElement("div",{className:"modalshiftcontent"},l().createElement("form",{className:"form-container",onSubmit:this.onSubmit1},l().createElement("div",{className:""},l().createElement("h6",{className:"e1"},"Document"),l().createElement("div",{className:"kyc-card__button-container1"},l().createElement("div",null,l().createElement("button",{className:"card__button",style:{position:"relative"}},l().createElement("label",{htmlFor:"icon-button-file-id2",className:"upload-button-label"},"Select File"),l().createElement("input",{required:!0,id:"icon-button-file-id2",type:"file",accept:".csv,.xlsm, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{position:"absolute",width:"60%",height:"100%",cursor:"pointer",top:"0",right:"0px",opacity:"0",border:"1.2px solid #212121"},onChange:this.handleOnChange1}))),""!==this.state.file1&&l().createElement("div",{className:"kyc-card__select_name-container"},l().createElement("p",null,this.state.filename1)))),l().createElement("div",{className:"modalsubmit"},l().createElement("div",{className:"submitbuttonbg"},l().createElement("div",{className:"row"},l().createElement("div",{className:"row justify-content-end-uw"},l().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal1}," ","Cancel"," "),"Created"==this.state.dealstatus||"Active"==this.state.dealstatus?l().createElement(i.c,{variant:"contained",color:"primary",type:"submit"},"Upload",!0===this.state.formLoader?l().createElement(p.c,{size:"22px",color:"primary"}):""):l().createElement(i.c,{variant:"contained",color:"primary",disabled:!0},"Upload"))))))))))),l().createElement("div",{id:"modal1"},l().createElement(h(),{isOpen:this.state.open3,onRequestClose:this.onCloseModal2,contentLabel:"Minimal Modal Example",style:b.YT},l().createElement(l().Fragment,null,l().createElement("div",{className:"modalPopup2"},l().createElement("div",{className:"popupTitle"},l().createElement("h2",null,"Upload the Document "),l().createElement("button",{type:"button",className:"closePopup",style:{minWidth:"30px"},onClick:this.onCloseModal2}," ",l().createElement(m.default,null)," ")),l().createElement("div",{className:"modalshiftcontent"},l().createElement("form",{className:"form-container",onSubmit:this.onSubmit2},l().createElement("div",{className:""},l().createElement("h6",{className:"e1"},"Document"),l().createElement("div",{className:"kyc-card__button-container1"},l().createElement("div",null,l().createElement("button",{className:"card__button",style:{position:"relative"}},l().createElement("label",{htmlFor:"icon-button-file-id3",className:"upload-button-label"},"Select File"),l().createElement("input",{required:!0,id:"icon-button-file-id3",type:"file",accept:".csv,.xlsm, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{position:"absolute",width:"60%",height:"100%",cursor:"pointer",top:"0",right:"0px",opacity:"0",border:"1.2px solid #212121"},onChange:this.handleOnChange2}))),""!==this.state.file2&&l().createElement("div",{className:"kyc-card__select_name-container"},l().createElement("p",null,this.state.filename2)))),l().createElement("div",{className:"modalsubmit"},l().createElement("div",{className:"submitbuttonbg"},l().createElement("div",{className:"row"},l().createElement("div",{className:"row justify-content-end-uw"},l().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal2}," ","Cancel"," "),l().createElement(i.c,{variant:"contained",color:"primary",type:"submit"},"Upload",!0===this.state.formLoader?l().createElement(p.c,{size:"22px",color:"primary"}):"")))))))))))))}}const w=(0,d.withSnackbar)(C)}}]);