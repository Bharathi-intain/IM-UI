"use strict";(self.webpackChunkwsfs=self.webpackChunkwsfs||[]).push([[835],{835:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var a=o(52536),n=o(23132),s=o.n(n),l=o(29496),i=o(20304),r=o.n(i),c=o(33887),p=o(46057),m=o(23124),d=(o(91156),o(74428),o(33912),o(37048)),h=(o(58124),o(28)),u=o(67784),g=(o(25104),o(39960),o(98656)),b=o.n(g),f=o(42840),S=o(55792),x=o(12552),v=(o(66797),o(86132),o(68664),o(45652)),w=o(89240),E=o(54928),C=(o(3076),o(54563)),y=o(96084);o(69656);sessionStorage.getItem("token");class D extends n.Component{constructor(e){super(e),(0,a.c)(this,"onOpenModal",(()=>{console.log("inside modal1"),this.setState({open1:!0})})),(0,a.c)(this,"onCloseModal",(()=>{this.setState({open1:!1,formData:{poolname:""}})})),(0,a.c)(this,"onSubmit1",(e=>{e.preventDefault(),console.log(this.state.formData),console.log("hello we have clicked the button"),this.MapPoolToLoan()})),(0,a.c)(this,"handleClicks",(()=>{console.log("hello we have clicked the button"),window.location.assign("/admin/issuerloans")})),(0,a.c)(this,"onchange",(e=>{this.setState({searchText:e.target.value,searchType:!0}),console.log("search: e.target.value",e.target.value)})),(0,a.c)(this,"searchBar",(()=>s().createElement("div",{className:"search-bar-main-container",id:"searchBox"},s().createElement("div",{className:"tableSearch1"},s().createElement(c.c,{value:this.state.searchText,onChange:this.onchange,placeholder:"Search",variant:"standard",size:"small"})),s().createElement("button",{type:"button",onClick:this.onClickCloseSearchBar,className:"close-mui-icon"},s().createElement(d.default,null))))),(0,a.c)(this,"onClickCloseSearchBar",(()=>{this.setState({searchText:""}),this.setState({showSearchBox:!1})})),(0,a.c)(this,"onClickSearchButton",(()=>{this.setState({showSearchBox:!0})})),(0,a.c)(this,"MapPoolToLoan",(async()=>{console.log("poollist",this.state.PoolList);let e=this.state.PoolList.filter((e=>e.poolID===this.state.formData.poolname));console.log("filterdata",e[0].poolname);var t={};t.loanid=this.state.loandetails,t.aitrainedpoolname=e[0].aitrainedpoolname,t.poolid=this.state.formData.poolname,t.issuerId=this.state.UserId,t.token=this.state.token,console.log("GetAllPools---"+JSON.stringify(t)),this.setState({formLoader:!0});const o=await(0,x.UD)(t);if(console.log(o),200!==o.status){const e="Something went wrong, please try again";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:5e3}),this.setState({formLoader:!1})}else if(this.setState({getLoansLoader:!1,openPopup:!0}),0==o.data.success){this.setState({formLoader:!1});const e=o.data.message;this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:1e3})}else{const t="Pool Added successfully!";this.props.enqueueSnackbar(t,{variant:"info",autoHideDuration:1e3}),this.UpdateLoanAndPoolStatus(e[0].poolname)}})),(0,a.c)(this,"UpdateLoanAndPoolStatus",(async e=>{sessionStorage.setItem("poolname",e),sessionStorage.setItem("poolid",this.state.formData.poolname);var t={};t.poolid=this.state.formData.poolname,t.poolStatus="Created",t.loanStatus="Mapped",t.token=this.state.token,console.log("datata",t);if(200===(await(0,x.sr)(t)).status)this.PoolDetails();else{const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,a.c)(this,"PoolDetails",(async()=>{window.location.assign("/admin/pooldetails")})),(0,a.c)(this,"GetAllPools",(async()=>{let e=[];console.log("APIResponse.data",this.state.PoolListdata),console.log("yyyyyy",e),this.setState({PoolDropdown:e,PoolListLoader:!1});var t={};t.issuerId=this.state.UserId,t.mailid=this.state.EmailAddress,t.token=this.state.token;const o=await(0,x.Y9)(t);if(200===o.status){if(null!==o){console.log("InvestorList",o.data),this.setState({PoolList:o.data.pooldetails});let e=[],t=[],n=[];var a;if(0!==o.data.length)null===(a=o.data)||void 0===a||a.pooldetails.forEach((function(o,a){console.log("key",o.poolID),console.log("value",a),n.push({label:o.poolname,value:o.poolID}),e.push(o.poolID),t.push(o.poolname)}));console.log("APIResponse.data",o.data),console.log("yyyyyy",n),this.setState({PoolDropdown:n,PoolListLoader:!1})}}else{const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,a.c)(this,"getMuiTheme",(()=>(0,w.c)({typography:{useNextVariants:!0},overrides:{MUIDataTable:{root:{border:"none !important"}},MUIDataTableBodyRow:{root:{"&:nth-child(even)":{backgroundColor:"rgb(229,229,229,0.3) !important"},"&.Mui-selected":{backgroundColor:"white !important"}}},MuiCheckbox:{root:{color:"#212121ab !important"},indeterminate:{color:"#FFC000 !important",border:"1.2px solid #212121 !important",borderRadius:"3px !important",width:"28px !important",height:"28px !important",marginLeft:"8px !important"},colorPrimary:{"&.Mui-checked":{color:"#FFC000 !important",border:"1.2px solid #212121 !important",borderRadius:"3px !important",width:"30px !important",height:"30px !important",marginLeft:"8px !important"},"&.Mui-checked:hover":{backgroundColor:"#fff !important"}}},MuiTableCell:{paddingCheckbox:{position:"static !important"},root:{fontFamily:"Mulish, sans-serif !important",padding:"20px",fontSize:"0.980rem !important"}},MUIDataTableBodyCell:{root:{borderBottom:"none !important"}},MUIDataTableHeadCell:{root:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingBottom:"5px !important",paddingTop:"5px !important",paddingLeft:"15px !important"},toolButton:{fontWeight:"600 !important",fontSize:"15px !important",backgroundColor:"none !important",padding:"none !important",marginLeft:"none !important",textTransform:"none !important",border:"none !important",borderRadius:"none !important"}},MUIDataTableToolbar:{root:{fontFamily:"Mulish, sans-serif !important",paddingLeft:"5px !important",paddingRight:"5px !important"},left:{fontFamily:"Mulish, sans-serif !important",fontSize:"28px",color:"#212121",fontWeight:"600",fontFamily:"arial",marginBottom:"20px",marginTop:"20px"},icon:{color:"#018E82",paddingRight:"14px !important","&:hover":{color:"#018E82 !important"}},iconActive:{color:"#018E82 !important"}},MuiButton:{contained:{backgroundColor:"#FFC000 !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},outlined:{backgroundColor:"#fff !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},textPrimary:{color:"#018E82 !important"},label:{fontSize:"15px !important",fontWeight:"600 !important",fontFamily:"Mulish, sans-serif !important"}},MUIDataTablePagination:{tableCellContainer:{borderBottom:"none !important"},navContainer:{justifyContent:"center"},toolbar:{paddingLeft:"50px !important"}},MuiTableSortLabel:{icon:{color:"#018E82 !important"},active:{color:"#018E82 !important"}},MuiTablePagination:{caption:{fontSize:"0.80rem"}},MuiIconButton:{colorInherit:{color:"#018E82 !important",zIndex:"1000"}},MUIDataTableSelectCell:{headerCell:{backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingLeft:"20px !important"},fixedLeft:{borderBottom:"none !important",paddingLeft:"20px !important"}},MUIDataTable:{paper:{boxShadow:"none !important"},responsiveBase:{border:"1px solid #212121 !important",borderRadius:"10px !important"}}}}))),this.state={token:sessionStorage.getItem("token"),selectedRecords:[],eligibleloans:{},tableData:[],loading:!1,getLoansLoader:!1,open:!1,openPopup:!1,selectedLoanId:[],searchText:"",rowsSelected:null,showSearchBox:!1,open1:!1,open2:!1,formData:{poolname:""},UserId:sessionStorage.getItem("userid"),token:sessionStorage.getItem("token"),EmailAddress:sessionStorage.getItem("EmailAddress"),loandetails:[],PoolListdata:[{poolID:"222uac234",poolname:"Credibly"},{poolID:"222uac235",poolname:"UOWN"},{poolID:"222uac236",poolname:"Credibly Investor"},{poolID:"222uac237",poolname:"UOWN 2"}],tableData:[]}}async selectedpoolid(e){const t=[];for(var o=0;o<e.length;o++){var a=e[o];let n=this.state.tableData[a]["Loan ID"];t.push(n)}console.log("selected Loans",t),this.setState({loandetails:t})}async componentDidMount(){var e=JSON.parse(sessionStorage.getItem("filteredloans"));let t=[];e.map((e=>{console.log("arrfilter",e),"Unmapped"===e.Status&&t.push(e)})),console.log("arr1",t),this.setState({tableData:t});let o=[];0!=e.length?(Object.keys(e[0]).map((e=>{if("_id"==e||"issuerId"==e||"poolid"==e||"System ID"==e)return;let t={name:e,label:e,options:{filter:!0,sort:!0}};o.push(t)})),console.log("display",o),this.setState({columns:o})):this.setState({tableData:[]});var a=window.location.pathname;sessionStorage.setItem("component",a),this.GetAllPools()}render(){const{classes:e}=this.props,{loandetails:t}=this.state,o=t.length,a={filterType:"dropdown",filter:!1,search:!1,print:!1,viewColumns:!1,download:!1,rowHover:!1,selectableRowsOnClick:!1,selectToolbarPlacement:"none",selectableRows:!0,onRowClick:this.onRowClick,onRowsSelect:this.onRowsSelect,onChangePage:this.onChangePage,rowsSelected:this.state.rowsSelected,rowsPerPage:[10],rowsPerPageOptions:[10,50,100],pagination:v.TrainRounded,onRowsSelect:(e,t)=>{console.log("allRows",t),console.log("rowsSelected",e),this.setState({rowsSelected:t.map((e=>e.dataIndex))});const o=t.map((e=>e.dataIndex));console.log("selected"+o),this.selectedpoolid(o)},onChangePage:e=>{console.log("currentPage",e),this.setState({currentPage:e})},searchText:this.state.searchText,searchPlaceholder:"Search",customSearch:(e,t,o)=>{let a=!1;return t.forEach((t=>{t.toString().indexOf(e)>=0&&(a=!0)})),a},loading:!1,textLabels:{body:{noMatch:!0===this.state.loading?s().createElement(m.c,{msg:"Please wait, Loading Loan Data"}):"Sorry, there is no matching data to display",toolTip:"Sort",columnHeaderTooltip:e=>"Sort for ".concat(e.label)},filter:{all:"All",title:"FILTERS",reset:"RESET"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"},pagination:{next:"Next ",previous:"Previous",rowsPerPage:"Rows Per Page",displayRows:"Of"}}};return s().createElement(s().Fragment,null,s().createElement("div",{className:"page"},s().createElement(l.c,{activeComponent:"Loans"}),s().createElement("div",{className:"content1"},s().createElement("div",{className:"page-content"},s().createElement("div",{className:"row row1"},s().createElement("div",null,1==this.state.showSearchBox?this.searchBar():s().createElement("div",{className:"arrowtextclass"},s().createElement(C.c,{onClick:this.handleClicks,className:"left-arrow-muis1 filter-icon"}),s().createElement("h1",{className:"headerdashboard"},"Filtered Loans"))),s().createElement("div",null,s().createElement("div",{className:"dashboard-top-right-container1"},s().createElement("div",{className:"search-bar-outer-container1"},0==this.state.showSearchBox&&s().createElement("button",{className:"search-mui-icons",type:"button",onClick:this.onClickSearchButton},s().createElement(y.c,null))),o>0?s().createElement(p.c,{variant:"contained",color:"primary",onClick:this.onOpenModal.bind(this),type:"submit"},"Map to Pool"):s().createElement(p.c,{variant:"contained1",color:"primary",onClick:this.onOpenModal.bind(this),type:"submit",disabled:!0},"Map to Pool")))),s().createElement(s().Fragment,null,s().createElement(E.ThemeProvider,{theme:this.getMuiTheme()},s().createElement(r(),{data:this.state.tableData,columns:[{name:"Loan ID",label:"Loan ID",options:{fiter:!0}},{name:"Asset Class",label:"Asset Class",options:{filter:!0}},{name:"Originator Name",label:"Originator Name",options:{filter:!0}},{name:"Original Principal Balance",label:"Original Principal",options:{filter:!0}},{name:"As Of Date",label:"As Of Date",options:{filter:!0}},{name:"Loan Data",label:"Loan Data",options:{filter:!0}},{name:"Contract Digitized",label:"Loan Contract",options:{filter:!0}},{name:"Status",label:"Status",options:{filter:!0}}],options:a}))))),s().createElement("div",{className:"filter"},s().createElement("div",{id:"modal1"},s().createElement(b(),{isOpen:this.state.open1,onRequestClose:this.onCloseModal,contentLabel:"Minimal Modal Example",style:f.YT},s().createElement(s().Fragment,null,s().createElement("div",{className:"modalPopup2"},s().createElement("div",{className:"popupTitle"},s().createElement("h2",null,"Map Selected Loans to Pool"),s().createElement("button",{type:"button",className:"closePopup",style:{minWidth:"30px"},onClick:this.onCloseModal}," ",s().createElement(d.default,null)," ")),s().createElement("div",{className:"modalshiftcontent"},s().createElement("form",{className:"form-container",onSubmit:this.onSubmit1},s().createElement("div",{className:"input-container"},s().createElement("label",{className:"label"},"Pool Name"),!1===this.state.PoolListLoader?s().createElement("select",{required:!0,className:"input-select",onChange:e=>{this.setState({formData:{...this.state.formData,poolname:e.target.value}})},value:this.state.formData.poolname},s().createElement("option",{value:"",disabled:!0,className:"selectclass"},"Select Any One"," "),this.state.PoolDropdown.map((e=>s().createElement("option",{value:e.value},e.label)))):""),s().createElement("div",{className:"modalsubmit"},s().createElement("div",{className:"submitbuttonbg"},s().createElement("div",{className:"row"},s().createElement("div",{className:"row justify-content-end3"},s().createElement("button",{type:"button",className:"popupbutton22",onClick:this.onCloseModal}," ","Cancel"," "),s().createElement(p.c,{variant:"contained",color:"primary",type:"submit"},"Map Now",!0===this.state.formLoader?s().createElement(u.c,{size:"22px",color:"primary"}):"")))))),!1===this.state.getLoansLoader?"":s().createElement(S.c,null)))))))))}}const P=(0,h.withSnackbar)(D)}}]);