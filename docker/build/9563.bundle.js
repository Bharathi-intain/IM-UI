"use strict";(self.webpackChunkwsfs=self.webpackChunkwsfs||[]).push([[9563],{79563:(t,e,a)=>{a.r(e),a.d(e,{default:()=>L});var o=a(52536),s=a(45072),n=a(23132),i=a.n(n),r=a(29496),l=(a(20304),a(33887)),c=a(46057),d=a(23124),m=(a(91156),a(74428),a(33912),a(37048)),h=(a(58124),a(28)),p=a(67784),u=(a(25104),a(39960),a(98656)),g=a.n(u),f=a(42840),b=a(55792),v=a(12552),S=(a(66797),a(86132),a(68664),a(45652)),w=a(89240),C=a(3076),D=(a(75677),a(79820),a(9840),a(69656)),y=a(71192),E=a(42724);sessionStorage.getItem("token");const I=t=>{let{sortAscending:e}=t;return i().createElement("img",{src:E.c,style:{transform:e?"rotate(180deg)":"rotate(0deg)",height:"12px"}})},k={Scroller:i().forwardRef(((t,e)=>i().createElement(C.TableContainer,(0,s.c)({component:C.Paper},t,{ref:e})))),Table:t=>i().createElement(C.Table,(0,s.c)({},t,{style:{borderCollapse:"separate"}})),TableHead:C.TableHead,TableRow:C.TableRow,TableBody:i().forwardRef(((t,e)=>i().createElement(C.TableBody,(0,s.c)({},t,{ref:e}))))};class x extends n.Component{constructor(t){super(t),(0,o.c)(this,"sortPoolDetails",(()=>{const{tableData:t,notificationlist:e}=this.state,a=t.sort(((t,a)=>{const o=e.indexOf(t.poolID);return e.indexOf(a.poolID)-o}));this.setState({tableData:a})})),(0,o.c)(this,"handleSort",(t=>{const{sortColumn:e,sortAscending:a,tableData:o,filteredData:s,searchText:n,notificationlist:i}=this.state;let r;if(r=e!==t||!a,"Actions"===t){const e=o.slice().sort(((t,e)=>{const a=i.indexOf(t.poolID),o=i.indexOf(e.poolID);return r?o-a:a-o}));return void this.setState({tableData:e,sortColumn:t,sortAscending:r})}const l=(e,a)=>{const o=e[t],s=a[t];if(isNaN(o)||isNaN(s)){const t=o?String(o).toLowerCase():"",e=s?String(s).toLowerCase():"";return t<e?r?-1:1:t>e?r?1:-1:0}return r?o-s:s-o};let c;n?c=s.slice().sort(l):(c=o.slice().sort(l),this.sortPoolDetails()),this.setState({tableData:c,sortColumn:t,sortAscending:r})})),(0,o.c)(this,"handleClick",(()=>{window.location.assign("/pendingkyc")})),(0,o.c)(this,"handleClickSubmitted",(()=>{console.log("handleClickSubmitted"),window.location.assign("/kycloginstep2")})),(0,o.c)(this,"handleClickUpload",(()=>{window.location.assign("/kycloginstep1")})),(0,o.c)(this,"handleClickInsights",(()=>{this.setState({activeInsights1:!0,activeInsights2:!1,activeInsights3:!1,activeInsights4:!1}),window.location.assign("/admin/issuerinsights")})),(0,o.c)(this,"handleClickLoans",(()=>{this.setState({activeInsights1:!1,activeInsights2:!0,activeInsights3:!1,activeInsights4:!1}),window.location.assign("/admin/issuerloans")})),(0,o.c)(this,"handleClickPools",(()=>{this.setState({activeInsights1:!1,activeInsights2:!1,activeInsights3:!0,activeInsights4:!1})})),(0,o.c)(this,"handleClickDeals",(()=>{this.setState({activeInsights1:!1,activeInsights2:!1,activeInsights3:!1,activeInsights4:!0}),window.location.assign("/admin/issuerdeals")})),(0,o.c)(this,"onOpenModal",(t=>{console.log("inside modal1"),this.setState({open1:!0,value:t})})),(0,o.c)(this,"onOpenModal1",(t=>{console.log("inside modal1"),this.setState({open2:!0,value:t})})),(0,o.c)(this,"onCloseModal",(()=>{this.setState({open1:!1})})),(0,o.c)(this,"onCloseModal1",(()=>{this.setState({open2:!1,formData:{note:""}})})),(0,o.c)(this,"viewdetails",(async(t,e,a)=>{sessionStorage.setItem("poolname",e),sessionStorage.setItem("poolid",t),window.location.assign("/admin/investorPreviewPooldetails")})),(0,o.c)(this,"previewupdatePoolStatus",(async(t,e)=>{this.setState({formLoader:!0});var a={};a.poolid=e,a.status=t,a.userid=this.state.UserId,a.token=this.state.token,a.organizationname=this.state.organizationname,a.username=this.state.firstname+this.state.lastname,a.message=this.state.formData.note;if(200===(await(0,v.ek)(a)).status){if("Accepted By Underwriter"==t){const t="Accepted Successfully";this.props.enqueueSnackbar(t,{variant:"info",autoHideDuration:3e3}),window.location.reload()}else{const t="Rejected Successfully";this.props.enqueueSnackbar(t,{variant:"info",autoHideDuration:3e3}),window.location.reload()}this.onCloseModal(),this.onCloseModal1(),this.setState({formLoader:!1})}else{this.setState({formLoader:!1});const t="Couldn't change the status";this.props.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"onSubmit1",(t=>{t.preventDefault(),this.SetUpPool()})),(0,o.c)(this,"onSubmit2",(t=>{t.preventDefault(),console.log(this.state.formData1),this.Uploadloanlms()})),(0,o.c)(this,"onchange",(t=>{const e=t.target.value.toLowerCase(),{tableData:a}=this.state,o=a.filter((t=>{for(let a in t)if(t[a]&&t[a].toString().toLowerCase().includes(e))return!0;return!1}));this.setState({searchText:t.target.value,filteredData:o,isDataFound:o.length>0})})),(0,o.c)(this,"searchBar",(()=>i().createElement("div",{className:"search-bar-main-container",id:"searchBox"},i().createElement("div",{className:"tableSearch1"},i().createElement(l.c,{value:this.state.searchText,onChange:this.onchange,placeholder:"Search",color:"#212121",variant:"standard",size:"small",autoFocus:!0})),i().createElement("button",{type:"button",onClick:this.onClickCloseSearchBar,className:"close-mui-icon"},i().createElement(m.default,null))))),(0,o.c)(this,"onClickCloseSearchBar",(()=>{this.setState({searchText:""}),this.setState({showSearchBox:!1})})),(0,o.c)(this,"onClickSearchButton",(()=>{this.setState({showSearchBox:!0})})),(0,o.c)(this,"handleOnChange2",(t=>{this.setState({file1:t.target.files[0],filename1:t.target.files[0].name}),console.log("eeee",t.target.files[0].name,this.state.file1)})),(0,o.c)(this,"GetAllPools",(async()=>{this.setState({tableData:[],loading:!0});var t={};t.issuerId=this.state.UserId,t.mailid=this.state.EmailAddress,t.token=this.state.token;const e=await(0,v.Y9)(t);if(200===e.status)console.log("AllGetAllPoolsdata--",e),0!=e.data.length?this.setState({open:!0,tableData:e.data,loading:!1,serialno:e.data.length}):this.setState({loading:!1,tableData:[]});else{this.setState({loading:!1});const t="Couldn't fetch the record";this.props.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"SetUpPool",(async t=>{this.setState({formLoader:!0});var e=this.state.formData;e.poolname=this.state.formData.poolname,e.assetclass=this.state.formData.assetclass,e.issuerId=this.state.UserId,e.description=this.state.formData.description,e.issuerName=this.state.firstname,e.token=this.state.token,sessionStorage.setItem("setuppooldetails",[e.poolname,e.assetclass,e.description]);const a=await(0,v.aA)(e);if(console.log(a),200===a.status){this.setState({formLoader:!1});const t="Pool Added Successfully!";this.props.enqueueSnackbar(t,{variant:"info",autoHideDuration:3e3}),this.onCloseModal1(),window.location.reload()}else{this.setState({formLoader:!1});const t="Something went wrong, please try again";this.props.enqueueSnackbar(t,{variant:"error",autoHideDuration:5e3})}})),(0,o.c)(this,"previewInvestorPool",(async()=>{this.setState({getLoansLoader:!0,tableData:[],loading:!0});var t={};t.investorId=this.state.UserId,t.mailid=this.state.EmailAddress,t.token=this.state.token;try{const o=await(0,v.iW)(t);if(200===o.status){var e,a;this.setState({getLoansLoader:!1,open:!0,tableData:null===(e=o.data)||void 0===e?void 0:e.pooldetails,notificationlist:null===(a=o.data)||void 0===a?void 0:a.notificationlist,loading:!1},(()=>{this.sortPoolDetails(),o.data.pooldetails&&o.data.pooldetails.length>0&&o.data.pooldetails[0].issuerId&&sessionStorage.setItem("issuerId",o.data.pooldetails[0].issuerId)}))}else{this.setState({getLoansLoader:!1,loading:!1});const t="Couldn't fetch the record";this.props.enqueueSnackbar(t,{variant:"error",autoHideDuration:3e3})}}catch(t){this.setState({loading:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"Uploadloanlms",(async()=>{console.log("uplaodlms");const t=new FormData;t.append("filename",this.state.file1),console.log("newdata",t),this.setState({formLoader:!0});const e=await(0,v.Kw)(t,this.state.token);if(200===e.status)if(console.log("upload--",e),!0===e.data.isSuccess)this.Onboradloans(e.data.filename);else{this.setState({formLoader:!1});const t="Something went wrong, please try again";this.props.enqueueSnackbar(t,{variant:"error",autoHideDuration:2e3})}else alert("Failed upload")})),(0,o.c)(this,"Onboradloans",(async t=>{var e={};e.issuerId=this.state.UserId,e.filename=t,e.asset_class=this.state.formData1.asset_class,e.token=this.state.token,console.log("value",e),this.setState({formLoader:!0});const a=await(0,v.k$)(e);if(200===a.status)if(console.log("upload--",a),!0===a.data.success){this.setState({formLoader:!1});const t="Data Saved Successfully";this.props.enqueueSnackbar(t,{variant:"info",autoHideDuration:3e3}),window.location.assign("/admin/issuerloans")}else{var o,s;this.setState({formLoader:!1,showMessage:!0,ColumnName:null==a||null===(o=a.data)||void 0===o?void 0:o.ColumnName,LoanIdData:null==a||null===(s=a.data)||void 0===s?void 0:s["Loan ID's"],showMessageData1:a.data.message},(()=>{var t;return console.log("LoanIdData",null===(t=this.state)||void 0===t||null===(t=t.LoanIdData)||void 0===t?void 0:t["Loan ID's"])}))}else alert("Failed upload")})),(0,o.c)(this,"getMuiTheme",(()=>(0,w.c)({typography:{useNextVariants:!0},overrides:{MUIDataTable:{root:{border:"none !important"}},MUIDataTableBodyRow:{root:{"&:nth-child(even)":{backgroundColor:"rgb(229,229,229,0.3) !important"},"&.Mui-selected":{backgroundColor:"white !important"}},hoverCursor:{cursor:"auto !important"}},MuiTableCell:{root:{fontFamily:"Mulish, sans-serif !important",padding:"20px",fontSize:"0.980rem !important"}},MUIDataTableBodyCell:{root:{fontFamily:"Mulish, sans-serif !important",fontWeight:"400 !important",fontSize:"15px !important",borderBottom:"none !important"}},MuiCircularProgress:{colorSecondary:{color:"#048c88 !important"}},MUIDataTableHeadCell:{root:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingBottom:"5px !important",paddingTop:"5px !important",paddingLeft:"15px !important"},toolButton:{fontWeight:"600 !important",fontSize:"15px !important",backgroundColor:"none !important",padding:"none !important",marginLeft:"none !important",textTransform:"none !important",border:"none !important",borderRadius:"none !important"}},MUIDataTableToolbar:{root:{fontFamily:"Mulish, sans-serif !important",paddingLeft:"5px !important",paddingRight:"5px !important"},titleText:{fontFamily:"Mulish, sans-serif !important",fontSize:"28px",color:"#212121",fontWeight:"600",fontFamily:"arial",marginBottom:"20px",marginTop:"20px"},icon:{color:"#018E82",paddingRight:"14px !important","&:hover":{color:"#018E82 !important"}},iconActive:{color:"#018E82 !important"}},MuiButton:{contained:{backgroundColor:"#FFC000 !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},outlined:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"#fff !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},label:{fontSize:"15px !important",fontWeight:"600 !important",fontFamily:"Mulish, sans-serif !important"},textPrimary:{color:"#018E82 !important"}},MUIDataTablePagination:{tableCellContainer:{borderBottom:"none !important"},navContainer:{justifyContent:"center"},toolbar:{paddingLeft:"50px !important"}},MuiTableSortLabel:{icon:{color:"#018E82 !important"},active:{color:"#018E82 !important"}},MuiTablePagination:{caption:{color:"#8C8C8C",marginRight:"".concat(this.state.currentPage>=1&&this.state.currentPage<=9?"-138":this.state.currentPage>=10?"-142":"-130","px"),fontSize:"0.80rem"}},MuiIconButton:{colorInherit:{color:"#018E82 !important",zIndex:"1000",marginRight:"60px",paddingLeft:"-25px"}},MUIDataTable:{paper:{boxShadow:"none !important"},responsiveBase:{border:"1px solid #212121 !important",borderRadius:"10px !important"}}}}))),(0,o.c)(this,"handleChange11",(t=>{console.log(t),this.setState({value1:t.target.value})})),(0,o.c)(this,"handleClickWorkBench",(()=>{this.setState({activeInsights:!1})})),this.state={token:sessionStorage.getItem("token"),selectedRecords:[],eligibleloans:{},tableData:[],tableData2:[],loading:!1,getLoansLoader:!1,formLoader:!1,open:!1,openPopup:!1,selectedLoanId:[],searchText:"",rowsSelected:null,open1:!1,open2:!1,formData:{poolname:"",assetclass:"",description:""},poolName:sessionStorage.getItem("poolname"),firstname:sessionStorage.getItem("firstname"),lastname:sessionStorage.getItem("lastname"),UserId:sessionStorage.getItem("userid"),EmailAddress:sessionStorage.getItem("EmailAddress"),kycuploadstatus:sessionStorage.getItem("KycUploadStatus"),kycverifystatus:sessionStorage.getItem("KycVerifiedStatus"),TermsOfService:sessionStorage.getItem("TermsOfService"),organizationname:sessionStorage.getItem("organizationname"),activeInsights1:!1,activeInsights2:!1,activeInsights3:!0,activeInsights4:!1,showSearchBox:!1,file1:"",file2:"",serialno:"12",contractaddress:"0xFD6380543eDc62EB255746DED6b7d39baAa414a1",VerificationDropdown:[],UnderwriterDropdown:[],ServicerDropdown:[],AiConfigurationDropdown:[],PayingagentDropdown:[],LoanIdData:[],ColumnName:[],notificationlist:[],screendisplay:!0,showStartPopUp:!0,formData1:{asset_class:""},showMessage:!1,value:""},this.onCloseModal1=this.onCloseModal1.bind(this),this.GetAllPools=this.GetAllPools.bind(this)}async selectedpoolid(t){const e=[];for(var a=0;a<t.length;a++){var o=t[a];let s=this.state.tableData[o].dealid;e.push(s)}console.log("selected Loans",e),sessionStorage.setItem("rundd",JSON.stringify(e))}async componentDidMount(){var t=window.location.pathname;sessionStorage.setItem("component",t);try{this.previewInvestorPool()}catch(t){console.log("Error:",t)}}render(){const{classes:t}=this.props,e=(this.onRowClick,this.onRowsSelect,this.onChangePage,this.state.rowsSelected,S.TrainRounded,this.state.searchText,!0===this.state.loading&&d.c,[{name:"poolID",label:"Pool ID",options:{filter:!0,sort:!0}},{name:"poolname",label:"Pool Name",options:{filter:!0,sort:!0}},{name:"assetclass",label:"Asset Class",options:{filter:!0,sort:!0}},{name:"numberofloans",label:"No. of Loans",options:{filter:!0,sort:!0}},{name:"setupdate",label:"Set-up On",options:{filter:!0,sort:!0}},{name:"originalbalance",label:"Original Balance",options:{filter:!0,sort:!0,customBodyRender:(t,e,a)=>i().createElement(i().Fragment,null,i().createElement(D.c,{value:t}))}},{name:"Actions",label:"Actions",bodyRenderer:t=>i().createElement(i().Fragment,null,i().createElement("div",{className:"text-center"},i().createElement("button",{type:"button",style:{cursor:"pointer",color:this.state.notificationlist.some((e=>e===t.poolID))?"#CA2E55":""},onClick:()=>this.viewdetails(t.poolID,t.poolname),className:"login-sign_up-links"},"View Details")))}]);return i().createElement(i().Fragment,null,"Agree"==this.state.TermsOfService?"Pending"==this.state.kycverifystatus?"No"==this.state.kycuploadstatus?this.handleClickUpload():this.handleClick():i().createElement("div",{className:"page"},i().createElement(r.c,{activeComponent:"Preview Pools"}),i().createElement("div",{className:"content1"},!0===this.state.screendisplay?i().createElement("div",{className:"page-content"},i().createElement("div",{className:"row row1"},i().createElement("div",{className:"investor-heading-container"},i().createElement("h1",{className:"headerdashboard"},"Preview - Pools")),i().createElement("div",null,i().createElement("div",{className:"dashboard-top-right-container1"},!1===this.state.showSearchBox?i().createElement(c.c,{variant:"contained",color:"primary",type:"submit",onClick:this.onClickSearchButton},"Search"):this.searchBar()))),i().createElement(i().Fragment,null,i().createElement("div",{className:"workbench-table-container"},this.state.loading?i().createElement("center",null,i().createElement(d.c,{msg:"Please wait, Loading Pool Data"})):i().createElement("div",{id:"table-container",style:{height:"100%",borderRadius:"1rem",overflow:"auto",border:"1px solid black"}},i().createElement(y.TableVirtuoso,{data:this.state.searchText?this.state.filteredData:this.state.tableData,columns:e,itemHeight:50,components:k,style:{width:"100",height:this.state.searchText?50*this.state.filteredData.length>630?630:50*this.state.filteredData.length+70:50*this.state.tableData.length>630?630:50*this.state.tableData.length+90,overflow:"auto",borderRadius:"1rem",overflowAnchor:"none"},fixedHeaderContent:()=>i().createElement(C.TableRow,null,e.map((t=>i().createElement(C.TableCell,{key:t.key,style:{background:"white",cursor:"pointer",width:"".concat(10*t.length,"px"),whiteSpace:"nowrap"},onClick:()=>this.handleSort(t.name)},i().createElement("div",{style:{display:"flex",alignItems:"center",gap:"2px"}},t.label,"Actions"!==t.name&&i().createElement(I,{sortAscending:this.state.sortAscending})))))),itemContent:t=>{const{searchText:a,filteredData:o,tableData:s}=this.state,n=a?o[t]:s[t],r=t%2!=0;return i().createElement(i().Fragment,null,e.map((t=>{return i().createElement(C.TableCell,{style:{width:"".concat(10*t.length,"px"),background:"white",whiteSpace:"nowrap",backgroundColor:r?"rgb(229,229,229,0.3)":""}},"originalbalance"===t.name?null==(e=n[t.name])?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):t.bodyRenderer?t.bodyRenderer(n):n[t.name]);var e})))}}))))):""),i().createElement("div",{id:"modal1"},i().createElement(g(),{isOpen:this.state.open1,onRequestClose:this.onCloseModal,contentLabel:"Minimal Modal Example",style:f.YT},i().createElement(i().Fragment,null,i().createElement("div",{className:"modalPopup2"},i().createElement("h2",null,"Are you sure you want to Accept the Pool to Preview?"),i().createElement("div",{className:"modalshiftcontent"},i().createElement("p",null,"Once accepted, the issuer will be notified that you have agreed to preview this Pool."),i().createElement("div",{className:"modalsubmit"},i().createElement("div",{className:"submitbuttonbg"},i().createElement("div",{className:"row"},i().createElement("div",{className:"row justify-content-accept"},i().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal}," ","Cancel"," "),i().createElement(c.c,{variant:"contained",color:"primary",onClick:()=>this.previewupdatePoolStatus("Accepted By Underwriter",this.state.value)},"Accept",!0===this.state.formLoader?i().createElement(p.c,{size:"22px",color:"primary"}):""))))),!1===this.state.getLoansLoader?"":i().createElement(b.c,null)))))),i().createElement("div",{id:"modal"},i().createElement(g(),{isOpen:this.state.open2,onRequestClose:this.onCloseModal1,contentLabel:"Minimal Modal Example",style:f.YT},i().createElement(i().Fragment,null,i().createElement("div",{className:"modalPopup2 "},i().createElement("h2",null,"Are you sure you want to Reject the Pool to Preview?"),i().createElement("div",{className:"modalshiftcontent"},i().createElement("p",null,"Once rejected, the Issuer will be notified that you have denied previewing this Pool."),i().createElement("div",{className:"input-container"},i().createElement("label",{className:"label"},"Note (Optional)"),i().createElement("input",{placeholder:"Type here",className:"input",type:"text",onChange:t=>{this.setState({formData:{...this.state.formData,note:t.target.value}})},value:this.state.formData.note})),i().createElement("div",{className:"submitbuttonbg"},i().createElement("div",{className:"row"},i().createElement("div",{className:"row justify-content-reject"},i().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal1}," ","Cancel"," "),i().createElement(c.c,{variant:"contained",color:"primary",onClick:()=>this.previewupdatePoolStatus("Rejected By Underwriter",this.state.value)},"Reject",!0===this.state.formLoader?i().createElement(p.c,{size:"22px",color:"primary"}):"")))),!1===this.state.getLoansLoader?"":i().createElement(b.c,null))))))):this.handleClickSubmitted())}}const L=(0,h.withSnackbar)(x)}}]);