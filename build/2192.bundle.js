"use strict";(self.webpackChunkwsfs=self.webpackChunkwsfs||[]).push([[2192],{82192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var o=a(52536),n=a(23132),s=a.n(n),i=a(29496),r=a(20304),l=a.n(r),c=a(33887),d=a(46057),m=a(23124),p=a(37048),h=a(28),g=a(67784),u=(a(39960),a(98656)),S=a.n(u),b=a(42840),f=a(55792),w=a(12552),y=(a(66797),a(86132),a(68664),a(45652)),v=a(69656),E=a(89240),C=a(54928);a(3076),a(75677),a(79820),a(9840),a(78272);sessionStorage.getItem("token");class x extends n.Component{constructor(e){super(e),(0,o.c)(this,"handleClickUpload",(()=>{this.props.history.push({pathname:"/kycloginstep1"})})),(0,o.c)(this,"handleClick",(()=>{this.props.history.push({pathname:"/pendingkyc"})})),(0,o.c)(this,"handleClickSubmitted",(()=>{console.log("handleClickSubmitted"),this.props.history.push({pathname:"/kycloginstep2"})})),(0,o.c)(this,"handleClickDeals",(()=>{this.setState({activePools:!1,activeDeals:!0,activeInsights3:!1}),window.location.assign("/admin/payingagent_deals")})),(0,o.c)(this,"handleClickActive",(()=>{this.setState({activePools:!1,activeDeals:!1,activeInsights3:!0}),window.location.assign("/admin/payingagent_active")})),(0,o.c)(this,"AddDeal",(()=>{sessionStorage.setItem("isAddDeal",!0),window.location.assign("/admin/general")})),(0,o.c)(this,"Recurring",((e,t)=>{sessionStorage.setItem("dealID",t.rowData[0]),sessionStorage.setItem("dealName",t.rowData[1]),sessionStorage.setItem("firstPaymentDate",t.rowData[6]),window.location.assign("/admin/general_recurring")})),(0,o.c)(this,"onOpenModal",(e=>{console.log("inside modal1"),this.setState({open1:!0,value:e})})),(0,o.c)(this,"onOpenModal1",(e=>{console.log("inside modal1"),this.setState({open2:!0,value:e})})),(0,o.c)(this,"onCloseModal",(()=>{this.setState({open1:!1})})),(0,o.c)(this,"onCloseModal1",(()=>{this.setState({open2:!1})})),(0,o.c)(this,"onchange",(e=>{this.setState({searchText:e.target.value,searchType:!0}),console.log("search: e.target.value",e.target.value)})),(0,o.c)(this,"searchBar",(()=>s().createElement("div",{className:"search-bar-main-container",id:"searchBox"},s().createElement("div",{className:"tableSearch1"},s().createElement(c.c,{value:this.state.searchText,onChange:this.onchange,placeholder:"Search",variant:"standard",size:"small",autoFocus:!0})),s().createElement("button",{type:"button",onClick:this.onClickCloseSearchBar,className:"close-mui-icon"},s().createElement(p.default,null))))),(0,o.c)(this,"onClickCloseSearchBar",(()=>{this.setState({searchText:""}),this.setState({showSearchBox:!1})})),(0,o.c)(this,"onClickSearchButton",(()=>{this.setState({showSearchBox:!0})})),(0,o.c)(this,"getDealsbyPayingAgentId",(async()=>{this.setState({getLoansLoader:!0,tableData:[],loading:!0});var e={};e.payingagentid=this.state.UserId,e.mailid=this.state.EmailAddress,e.token=this.state.token;const t=await(0,w.gz)(e);if(200===t.status)console.log("AllGetAllPoolsdata--",t),this.setState({getLoansLoader:!1,open:!0,tableData:t.data,loading:!1});else{this.setState({getLoansLoader:!1,loading:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"SetUpPoolRoles",(async()=>{this.setState({getLoansLoader:!0});const{token:e,EmailAddress:t}=this.state,a={token:e};try{const e=await(0,w.Ex)(a);if(200===e.status){const{Verification:a,Underwriter:o,Investor:n,Servicer:s,Issuer:i,"Rating Agency":r,"Paying Agent":l}=e.data,c=(e,a)=>{e.forEach((e=>{e.UserName.toLowerCase().includes("test")===t.toLowerCase().includes("test")&&a.push({label:e.EmailAddress===sessionStorage.getItem("EmailAddress")?"Self":e.UserName,value:e.UserId,Email:e.EmailAddress})}))},d=[];c(a,d),this.setState({VerificationDropdown:d,getLoansLoader:!1}),sessionStorage.setItem("verificationDropdown",JSON.stringify(d));const m=[];c(i,m),this.setState({IssuerDropdown:m,getLoansLoader:!1}),sessionStorage.setItem("IssuerDropdown",JSON.stringify(m));const p=[];c(o,p),this.setState({UnderwriterDropdown:p,getLoansLoader:!1}),sessionStorage.setItem("underwriterDropdown",JSON.stringify(p));const h=[];c(n,h),this.setState({InvestorDropdown:h,getLoansLoader:!1}),sessionStorage.setItem("investorDropdown",JSON.stringify(h));const g=[];c(s,g),this.setState({ServicerDropdown:g,getLoansLoader:!1}),sessionStorage.setItem("servicerDropdown",JSON.stringify(g));const u=[];c(r,u),this.setState({RatingAgencyDropdown:u,getLoansLoader:!1}),sessionStorage.setItem("ratingAgencyDropdown",JSON.stringify(u));const S=[];c(l,S),this.setState({PayingAgentDropdown:S,getLoansLoader:!1}),sessionStorage.setItem("payingAgentDropdown",JSON.stringify(S))}else{this.setState({getLoansLoader:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}}catch(e){console.error("Error occurred:",e),this.setState({getLoansLoader:!1})}})),(0,o.c)(this,"ViewDetails",(async e=>{console.log("value",e),sessionStorage.setItem("dealId",e),sessionStorage.setItem("component","/admin/payingagent_deals");var t={};t.dealid=e,t.token=this.state.token;const a=await(0,w.Uh)(t);if(200===a.status)"postclosing"==a.data.redirect?window.location.assign("/admin/payingagent_dealdetails"):window.location.assign("/admin/payingagent_offchaindetails"),console.log("AllGetAllPoolsdata--",a);else{const e="Something went wrong";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"getMuiTheme",(()=>(0,E.c)({typography:{useNextVariants:!0},overrides:{MUIDataTable:{root:{border:"none !important"}},MUIDataTableBodyRow:{root:{"&:nth-child(even)":{backgroundColor:"rgb(229,229,229,0.3) !important"},"&.Mui-selected":{backgroundColor:"white !important"}},hoverCursor:{cursor:"auto !important"}},MuiTableCell:{root:{fontFamily:"Mulish, sans-serif !important",padding:"20px",fontSize:"0.980rem !important"}},MuiCircularProgress:{colorSecondary:{color:"#048c88 !important"}},MUIDataTableBodyCell:{root:{borderBottom:"none !important"}},MUIDataTableHeadCell:{root:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingBottom:"5px !important",paddingTop:"5px !important",paddingLeft:"15px !important"},toolButton:{fontFamily:"Catamaran !important",fontWeight:"600 !important",fontSize:"15px !important",backgroundColor:"none !important",padding:"none !important",marginLeft:"none !important",textTransform:"none !important",border:"none !important",borderRadius:"none !important"}},MUIDataTableToolbar:{root:{fontFamily:"Mulish !important",paddingLeft:"5px !important",paddingRight:"5px !important"},titleText:{fontFamily:"Mulish !important",fontSize:"28px",color:"#212121",fontWeight:"600",fontFamily:"arial",marginBottom:"20px",marginTop:"20px"},icon:{color:"#018E82",paddingRight:"14px !important","&:hover":{color:"#018E82 !important"}},iconActive:{color:"#018E82 !important"}},MuiButton:{contained:{backgroundColor:"#FFC000 !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},outlined:{backgroundColor:"#fff !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},label:{fontSize:"15px !important",fontWeight:"600 !important",fontFamily:"Mulish !important"},textPrimary:{color:"#018E82 !important"}},MUIDataTablePagination:{tableCellContainer:{borderBottom:"none !important"},navContainer:{justifyContent:"center"},toolbar:{paddingLeft:"50px !important"}},MuiTableSortLabel:{icon:{color:"#018E82 !important"},active:{color:"#018E82 !important"}},MuiTablePagination:{caption:{color:"#8C8C8C",marginRight:"".concat(this.state.currentPage>=1&&this.state.currentPage<=9?"-138":this.state.currentPage>=10?"-142":"-130","px"),fontSize:"0.80rem"}},MuiIconButton:{colorInherit:{color:"#018E82 !important",zIndex:"1000",marginRight:"60px",paddingLeft:"-25px"}},MUIDataTable:{paper:{boxShadow:"none !important"},responsiveBase:{border:"1px solid #212121 !important",borderRadius:"10px !important"}}}}))),this.state={token:sessionStorage.getItem("token"),selectedRecords:[],eligibleloans:{},tableData:[],loading:!1,getLoansLoader:!1,open:!1,openPopup:!1,selectedLoanId:[],searchText:"",rowsSelected:null,open1:!1,open2:!1,formData:{note:""},UserId:sessionStorage.getItem("userid"),poolName:sessionStorage.getItem("poolname"),EmailAddress:sessionStorage.getItem("EmailAddress"),kycuploadstatus:sessionStorage.getItem("KycUploadStatus"),kycverifystatus:sessionStorage.getItem("KycVerifiedStatus"),TermsOfService:sessionStorage.getItem("TermsOfService"),activePools:!1,activeDeals:!0,showSearchBox:!1}}async selectedpoolid(e){const t=[];for(var a=0;a<e.length;a++){var o=e[a];let n=this.state.tableData[o].dealid;t.push(n)}console.log("selected Loans",t),sessionStorage.setItem("rundd",JSON.stringify(t))}async componentDidMount(){this.getDealsbyPayingAgentId(),this.SetUpPoolRoles();var e=window.location.pathname;sessionStorage.setItem("component",e)}render(){const{classes:e}=this.props,t={filterType:"dropdown",filter:!1,search:!1,print:!1,viewColumns:!1,download:!1,rowHover:!1,selectableRowsOnClick:!1,selectableRows:!1,onRowClick:this.onRowClick,onRowsSelect:this.onRowsSelect,onChangePage:this.onChangePage,rowsSelected:this.state.rowsSelected,rowsPerPage:[10],rowsPerPageOptions:!1,jumpToPage:!1,pagination:y.TrainRounded,onRowsSelect:(e,t)=>{console.log("allRows",t),console.log("rowsSelected",e),this.setState({rowsSelected:t.map((e=>e.dataIndex))});const a=t.map((e=>e.dataIndex));console.log("selected"+a),this.selectedpoolid(a)},onChangePage:e=>{console.log("currentPage",e),this.setState({currentPage:e})},searchText:this.state.searchText,searchPlaceholder:"Search",customSearch:(e,t,a)=>{let o=!1;return t.forEach((t=>{t.toString().indexOf(e)>=0&&(o=!0)})),o},loading:!1,textLabels:{body:{noMatch:!0===this.state.loading?s().createElement(m.c,{msg:"Please wait, Loading Deal Data"}):"Sorry, there is no matching data to display",toolTip:"Sort",columnHeaderTooltip:e=>"Sort for ".concat(e.label)},filter:{all:"All",title:"FILTERS",reset:"RESET"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"},pagination:{next:"Next ",previous:"Previous",rowsPerPage:"",displayRows:"Of"}}},a=[{name:"dealId",label:"Deal Id",options:{filter:!0,sort:!0}},{name:"dealName",label:"Deal Name",options:{filter:!0,sort:!0}},{name:"assetclass",label:"Asset Class",options:{filter:!0,sort:!0}},{name:"originalbalance",label:"Principal Balance",options:{filter:!0,sort:!0,customBodyRender:(e,t,a)=>s().createElement(s().Fragment,null,s().createElement(v.c,{value:e}))}},{name:"numberofloans",label:"No. of Loans",options:{filter:!0,sort:!0}},{name:"numberofTranches",label:"No. of Tranches",options:{filter:!0,sort:!0}},{name:"firstPaymentDate",label:"Payment Date",options:{filter:!0,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!0}},{name:"dealId",label:"Actions",options:{filter:!1,sort:!1,customHeadRender:(e,t)=>s().createElement("th",{style:{backgroundColor:"rgba(1, 142, 130, 0.1)",borderBottom:"none",paddingBottom:"5px",paddingTop:"5px",paddingLeft:"20px"}},e.label),customBodyRender:(e,t,a)=>(console.log("vallllll",e,t),s().createElement(s().Fragment,null,s().createElement(s().Fragment,null,s().createElement("div",{style:{display:"flex",gap:"5px"}},s().createElement("button",{className:"popupbuttons1",onClick:()=>this.Recurring(e,t)},"Deal"),s().createElement("button",{className:"popupbuttons1",onClick:()=>this.ViewDetails(e)},"View Details"),"Pending"==t.rowData[6]?s().createElement(s().Fragment,null,s().createElement("button",{className:"popupbuttons1 uw-popup-button",onClick:()=>this.onOpenModal(e)},"Accept"),s().createElement("button",{className:"popupbuttons1",onClick:()=>this.onOpenModal1(e)},"Reject")):null))))}}];return s().createElement(s().Fragment,null,"Agree"==this.state.TermsOfService?"Pending"==this.state.kycverifystatus?"No"==this.state.kycuploadstatus?this.handleClickUpload():this.handleClick():s().createElement("div",{className:"page"},s().createElement(i.c,{activeComponent:"PayingAgentDeal"}),s().createElement("div",{className:"content1"},s().createElement("div",{className:"page-content"},s().createElement("div",{className:"row row1"},s().createElement("div",{className:"investor-heading-container"},s().createElement("h1",{className:"headerdashboard"},"Dashboard")),s().createElement("div",null,s().createElement("div",{className:"dashboard-top-right-container1"},s().createElement("div",{className:"search-bar-outer-container uw-search-button-container"},0==this.state.showSearchBox?s().createElement(d.c,{variant:"contained",color:"primary",type:"button",onClick:this.onClickSearchButton},"Search"):this.searchBar())))),s().createElement(s().Fragment,null,s().createElement("div",{className:"workbench-table-container"},s().createElement(C.ThemeProvider,{theme:this.getMuiTheme()},s().createElement(l(),{data:this.state.tableData,columns:a,options:t})))))),s().createElement("div",{id:"modal1"},s().createElement(S(),{isOpen:this.state.open1,onRequestClose:this.onCloseModal,contentLabel:"Minimal Modal Example",style:b.YT},s().createElement(s().Fragment,null,s().createElement("div",{className:"modalPopup2"},s().createElement("h3",null,"Are you sure you want to Accept the Pool?"),s().createElement("div",{className:"modalshiftcontent"},s().createElement("p",null,"Once accepted, this Pool will be converted into a Deal, and the Issuer will be notified that you have agreed to underwrite this Deal."),s().createElement("div",{className:"modalsubmit"},s().createElement("div",{className:"submitbuttonbg"},s().createElement("div",{className:"row"},s().createElement("div",{className:"row justify-content-accept"},s().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal}," ","Cancel"," "),s().createElement(d.c,{variant:"contained",color:"primary",onClick:()=>this.UpdatePoolUWStatus("Accepted By Servicer",this.state.value)},"Accept",!0===this.state.formLoader?s().createElement(g.c,{size:"22px",color:"primary"}):""))))),!1===this.state.getLoansLoader?"":s().createElement(f.c,null)))))),s().createElement("div",{id:"modal"},s().createElement(S(),{isOpen:this.state.open2,onRequestClose:this.onCloseModal1,contentLabel:"Minimal Modal Example",style:b.YT},s().createElement(s().Fragment,null,s().createElement("div",{className:"modalPopup2"},s().createElement("h3",null,"Are you sure you want to Reject the Pool?"),s().createElement("div",{className:"modalshiftcontent"},s().createElement("p",null,"Once rejected, the Issuer will be notified that you have denied to underwrite this Deal."),s().createElement("div",{className:"input-container"},s().createElement("label",{className:"label"},"Note (Optional)"),s().createElement("input",{placeholder:"Type here",className:"input",type:"text",onChange:e=>{this.setState({formData:{...this.state.formData,note:e.target.value}})},value:this.state.formData.note})),s().createElement("div",{className:"submitbuttonbg"},s().createElement("div",{className:"row"},s().createElement("div",{className:"row justify-content-reject"},s().createElement("button",{type:"button",className:"popupbutton2",onClick:this.onCloseModal1}," ","Cancel"," "),s().createElement(d.c,{variant:"contained",color:"primary",onClick:()=>this.UpdatePoolUWStatus("Rejected By Servicer",this.state.value)},"Reject",!0===this.state.formLoader?s().createElement(g.c,{size:"22px",color:"primary"}):"")))),!1===this.state.getLoansLoader?"":s().createElement(f.c,null))))))):this.handleClickSubmitted())}}const D=(0,h.withSnackbar)(x)}}]);