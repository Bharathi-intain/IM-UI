"use strict";(self.webpackChunkwsfs=self.webpackChunkwsfs||[]).push([[7476],{27476:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var o=a(52536),n=a(45072),s=a(23132),r=a.n(s),i=a(29496),l=(a(20304),a(33887)),c=a(46057),m=a(23124),d=(a(91156),a(74428),a(33912),a(37048)),p=(a(58124),a(28)),h=a(67784),u=(a(25104),a(39960),a(98656)),g=a.n(u),b=a(42840),f=a(55792),y=a(12552),S=(a(45652),a(89240)),E=a(3076),v=(a(75677),a(79820),a(9840),a(69656)),C=a(71192),x=a(42724);sessionStorage.getItem("token");const k=e=>{let{sortAscending:t}=e;return r().createElement("img",{src:x.c,style:{transform:t?"rotate(180deg)":"rotate(0deg)",height:"12px"}})},w={Scroller:r().forwardRef(((e,t)=>r().createElement(E.TableContainer,(0,n.c)({component:E.Paper},e,{ref:t})))),Table:e=>r().createElement(E.Table,(0,n.c)({},e,{style:{borderCollapse:"separate"}})),TableHead:E.TableHead,TableRow:E.TableRow,TableBody:r().forwardRef(((e,t)=>r().createElement(E.TableBody,(0,n.c)({},e,{ref:t}))))};class D extends s.Component{constructor(e){super(e),(0,o.c)(this,"handleClickUpload",(()=>{this.props.history.push({pathname:"/kycloginstep1"})})),(0,o.c)(this,"handleClick",(()=>{this.props.history.push({pathname:"/pendingkyc"})})),(0,o.c)(this,"handleClickSubmitted",(()=>{console.log("handleClickSubmitted"),this.props.history.push({pathname:"/kycloginstep2"})})),(0,o.c)(this,"handleClickDeals",(()=>{this.setState({activePools:!1,activeInsights2:!0}),window.location.assign("/admin/uw_dashboard_deals")})),(0,o.c)(this,"handleClickPools",(()=>{this.setState({activePools:!0,activeInsights2:!1})})),(0,o.c)(this,"handleSort",(e=>{const{sortColumn:t,sortAscending:a,tableData:o,filteredData:n,searchText:s}=this.state;let r;r=t!==e||!a;const i=(t,a)=>{const o=t[e],n=a[e];if(isNaN(o)||isNaN(n)){const e=o?String(o).toLowerCase():"",t=n?String(n).toLowerCase():"";return e<t?r?-1:1:e>t?r?1:-1:0}return r?o-n:n-o};let l;l=s?n.slice().sort(i):o.slice().sort(i),this.setState({tableData:l,sortColumn:e,sortAscending:r})})),(0,o.c)(this,"onOpenModal",(e=>{console.log("inside modal1"),this.setState({open1:!0,value:e})})),(0,o.c)(this,"onOpenModal1",(e=>{console.log("inside modal1"),this.setState({open2:!0,value:e})})),(0,o.c)(this,"onCloseModal",(()=>{this.setState({open1:!1})})),(0,o.c)(this,"onCloseModal1",(()=>{this.setState({open2:!1}),this.setState({formData:{note:""}})})),(0,o.c)(this,"onchange",(e=>{const t=e.target.value.toLowerCase(),{tableData:a}=this.state,o=a.filter((e=>{for(let a in e)if(e[a]&&e[a].toString().toLowerCase().includes(t))return!0;return!1}));this.setState({searchText:e.target.value,filteredData:o,isDataFound:o.length>0})})),(0,o.c)(this,"searchBar",(()=>r().createElement("div",{className:"search-bar-main-container",id:"searchBox"},r().createElement("div",{className:"tableSearch1"},r().createElement(l.c,{value:this.state.searchText,onChange:this.onchange,placeholder:"Search",color:"#212121",variant:"standard",size:"small",autoFocus:!0})),r().createElement("button",{type:"button",onClick:this.onClickCloseSearchBar,className:"close-mui-icon"},r().createElement(d.default,null))))),(0,o.c)(this,"onClickCloseSearchBar",(()=>{this.setState({searchText:""}),this.setState({showSearchBox:!1})})),(0,o.c)(this,"onClickSearchButton",(()=>{this.setState({showSearchBox:!0})})),(0,o.c)(this,"getallratingagencypool",(async()=>{this.setState({getLoansLoader:!0,tableData:[],loading:!0});var e={};e.ratingagency=this.state.UserId,e.mailid=this.state.EmailAddress,e.token=this.state.token;const t=await(0,y.oz)(e);if(200===t.status)console.log("AllGetAllPoolsdata--",t),this.setState({getLoansLoader:!1,open:!0,tableData:t.data,loading:!1});else{this.setState({getLoansLoader:!1,loading:!1});const e="Couldn't fetch the record";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"CreateDealUW",(async e=>{var t={};t.poolid=e,console.log("datata",t),t.token=this.state.token;if(200===(await(0,y.cH)(t)).status)this.getallratingagencypool();else{const e="Couldn't create the deal";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"UpdatePoolUWStatus",(async(e,t)=>{var a={};a.poolid=t.poolID,a.status=e,a.userid=this.state.UserId,a.organizationname=this.state.organizationname,a.username=this.state.firstname+this.state.lastname,a.message=this.state.formData.note,console.log("datata",a),this.setState({formLoader:!0}),a.token=this.state.token;if(200===(await(0,y.ek)(a)).status){if("Accepted By RatingAgency"==e){const e="Accepted Successfully";this.props.enqueueSnackbar(e,{variant:"info",autoHideDuration:3e3}),this.getallratingagencypool()}else{const e="Rejected Successfully";this.props.enqueueSnackbar(e,{variant:"info",autoHideDuration:3e3}),this.getallratingagencypool()}this.onCloseModal(),this.onCloseModal1(),this.setState({formLoader:!1})}else{this.setState({formLoader:!1});const e="Couldn't change the status";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}})),(0,o.c)(this,"PoolDetails",(async e=>{if(sessionStorage.setItem("poolid",e.poolID),"Pending"===e.status){const e="Please accept the pool";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}else if("Rejected By RatingAgency"===e.status){const e="Rejected By RatingAgency";this.props.enqueueSnackbar(e,{variant:"error",autoHideDuration:3e3})}else window.location.assign("/admin/ra_pool_details")})),(0,o.c)(this,"getMuiTheme",(()=>(0,S.c)({typography:{useNextVariants:!0},overrides:{MUIDataTable:{root:{border:"none !important"}},MUIDataTableBodyRow:{root:{"&:nth-child(even)":{backgroundColor:"rgb(229,229,229,0.3) !important"},"&.Mui-selected":{backgroundColor:"white !important"}},hoverCursor:{cursor:"auto !important"}},MuiTableCell:{root:{fontFamily:"Mulish, sans-serif !important",padding:"20px",fontSize:"0.980rem !important"}},MUIDataTableBodyCell:{root:{fontFamily:"Mulish, sans-serif !important",fontWeight:"400 !important",fontSize:"15px !important",borderBottom:"none !important"}},MuiCircularProgress:{colorSecondary:{color:"#048c88 !important"}},MUIDataTableHeadCell:{root:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"rgba(1, 142, 130, 0.1) !important",borderBottom:"none !important",paddingBottom:"5px !important",paddingTop:"5px !important",paddingLeft:"15px !important"},toolButton:{fontWeight:"600 !important",fontSize:"15px !important",backgroundColor:"none !important",padding:"none !important",marginLeft:"none !important",textTransform:"none !important",border:"none !important",borderRadius:"none !important"}},MUIDataTableToolbar:{root:{fontFamily:"Mulish, sans-serif !important",paddingLeft:"5px !important",paddingRight:"5px !important"},titleText:{fontFamily:"Mulish, sans-serif !important",fontSize:"28px",color:"#212121",fontWeight:"600",fontFamily:"arial",marginBottom:"20px",marginTop:"20px"},icon:{color:"#018E82",paddingRight:"14px !important","&:hover":{color:"#018E82 !important"}},iconActive:{color:"#018E82 !important"}},MuiButton:{contained:{backgroundColor:"#FFC000 !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},outlined:{fontFamily:"Mulish, sans-serif !important",backgroundColor:"#fff !important",padding:"5px 30px !important",marginLeft:"10px !important",textTransform:"none !important",border:"1.2px solid #212121 !important",borderRadius:"20px !important",boxShadow:"none !important"},label:{fontSize:"15px !important",fontWeight:"600 !important",fontFamily:"Mulish, sans-serif !important"},textPrimary:{color:"#018E82 !important"}},MUIDataTablePagination:{tableCellContainer:{borderBottom:"none !important"},navContainer:{justifyContent:"center"},toolbar:{paddingLeft:"50px !important"}},MuiTableSortLabel:{icon:{color:"#018E82 !important"},active:{color:"#018E82 !important"}},MuiTablePagination:{caption:{color:"#8C8C8C",marginRight:"".concat(this.state.currentPage>=1&&this.state.currentPage<=9?"-138":this.state.currentPage>=10?"-142":"-130","px"),fontSize:"0.80rem"}},MuiIconButton:{colorInherit:{color:"#018E82 !important",zIndex:"1000",marginRight:"60px",paddingLeft:"-25px"}},MUIDataTable:{paper:{boxShadow:"none !important"},responsiveBase:{border:"1px solid #212121 !important",borderRadius:"10px !important"}}}}))),this.state={selectedRecords:[],eligibleloans:{},tableData:[],loading:!1,getLoansLoader:!1,open:!1,openPopup:!1,selectedLoanId:[],searchText:"",rowsSelected:null,open1:!1,open2:!1,formData:{note:""},firstname:sessionStorage.getItem("firstname"),lastname:sessionStorage.getItem("lastname"),UserId:sessionStorage.getItem("userid"),poolName:sessionStorage.getItem("poolname"),token:sessionStorage.getItem("token"),kycuploadstatus:sessionStorage.getItem("KycUploadStatus"),kycverifystatus:sessionStorage.getItem("KycVerifiedStatus"),TermsOfService:sessionStorage.getItem("TermsOfService"),EmailAddress:sessionStorage.getItem("EmailAddress"),activePools:!0,activeInsights2:!1,showSearchBox:!1,organizationname:sessionStorage.getItem("organizationname")}}async selectedpoolid(e){const t=[];for(var a=0;a<e.length;a++){var o=e[a];let n=this.state.tableData[o].dealid;t.push(n)}console.log("selected Loans",t),sessionStorage.setItem("rundd",JSON.stringify(t))}async componentDidMount(){var e=window.location.pathname;sessionStorage.setItem("component",e),this.getallratingagencypool()}render(){const{classes:e,poolid:t}=this.props;console.log("poolid",t);const a=[{name:"poolID",label:"Pool ID",options:{filter:!0,sort:!0}},{name:"poolname",label:"Pool Name",options:{filter:!0,sort:!0}},{name:"assetclass",label:"Asset Class",options:{filter:!0,sort:!0}},{name:"numberofloans",label:"No. of Loans",options:{filter:!0,sort:!0}},{name:"setupdate",label:"Set-up On",options:{filter:!0,sort:!0}},{name:"originalbalance",label:"Original Balance",options:{filter:!0,sort:!0,customBodyRender:(e,t,a)=>r().createElement(r().Fragment,null,r().createElement(v.c,{value:e}))}},{name:"status",label:"Status",options:{filter:!0,sort:!0,customHeadRender:(e,t)=>r().createElement("th",{style:{backgroundColor:"rgba(1, 142, 130, 0.1)",borderBottom:"none",paddingBottom:"5px",paddingTop:"5px",textAlign:"center"}},e.label),customBodyRender:(e,t,a)=>r().createElement(r().Fragment,null,r().createElement("div",{className:"text-center"},e))}},{name:"actions",label:"Actions",key:"1",bodyRenderer:e=>(console.log("table",e),r().createElement(r().Fragment,null,r().createElement("div",null,r().createElement("span",null,r().createElement("button",{className:"popupbutton1",onClick:()=>this.PoolDetails(e)},"View Details"),"Pending"==e.status?r().createElement(r().Fragment,null,r().createElement("button",{className:"popupbuttons1 uw-popup-button",onClick:()=>this.onOpenModal(e)},"Accept"),r().createElement("button",{className:"popupbuttons1",onClick:()=>this.onOpenModal1(e)},"Reject")):null))))}];return r().createElement(r().Fragment,null,"Agree"==this.state.TermsOfService?"Pending"==this.state.kycverifystatus?"No"==this.state.kycuploadstatus?this.handleClickUpload():this.handleClick():r().createElement("div",{className:"page"},r().createElement(i.c,{activeComponent:"Pools"}),r().createElement("div",{className:"content1"},r().createElement("div",{className:"page-content"},r().createElement("div",{className:"row row1"},r().createElement("div",{className:"investor-heading-container"},r().createElement("h1",{className:"headerdashboard"},"Pools")),r().createElement("div",null,r().createElement("div",{className:"dashboard-top-right-container1"},r().createElement("div",{className:"search-bar-outer-container uw-search-button-container"},0==this.state.showSearchBox?r().createElement(c.c,{variant:"contained",color:"primary",type:"button",onClick:this.onClickSearchButton},"Search"):this.searchBar())))),r().createElement(r().Fragment,null,r().createElement("div",null,this.state.loading?r().createElement("center",null,r().createElement(m.c,{msg:"Please wait, Loading Pool Data"})):r().createElement("div",{id:"table-container",style:{height:"100%",borderRadius:"1rem",overflow:"auto",border:"1px solid black"}},r().createElement(C.TableVirtuoso,{data:this.state.searchText?this.state.filteredData:this.state.tableData,columns:a,itemHeight:50,components:w,style:{width:"100",height:this.state.searchText?50*this.state.filteredData.length>630?630:50*this.state.filteredData.length+60:50*this.state.tableData.length>630?630:50*this.state.tableData.length+90,overflow:"auto",borderRadius:"1rem",overflowAnchor:"none"},fixedHeaderContent:()=>r().createElement(E.TableRow,null,a.map((e=>r().createElement(E.TableCell,{key:e.key,style:{background:"white",cursor:"pointer",width:"".concat(10*e.length,"px"),whiteSpace:"nowrap",height:"50px"},onClick:()=>this.handleSort(e.name)},r().createElement("div",{style:{display:"flex",alignItems:"center",gap:"2px",fontWeight:"600",fontSize:"15px"}},e.label,"actions"!==e.name&&r().createElement(k,{sortAscending:this.state.sortAscending})))))),itemContent:e=>{const{searchText:t,filteredData:o,tableData:n}=this.state,s=t?o[e]:n[e],i=e%2!=0;return r().createElement(r().Fragment,null,a.map((e=>{return r().createElement(E.TableCell,{style:{width:"".concat(10*e.length,"px"),background:"white",whiteSpace:"nowrap",backgroundColor:i?"rgb(229,229,229,0.3)":""}},"originalbalance"===e.name?null==(t=s[e.name])?void 0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e.bodyRenderer?e.bodyRenderer(s):s[e.name]);var t})))}})))))),r().createElement("div",{id:"modal1"},r().createElement(g(),{isOpen:this.state.open1,onRequestClose:this.onCloseModal,contentLabel:"Minimal Modal Example",style:b.YT},r().createElement(r().Fragment,null,r().createElement("div",{className:"modalPopup2"},r().createElement("h2",null,"Are you sure you want to Accept the Pool?"),r().createElement("div",{className:"modalshiftcontent"},r().createElement("p",null,"Once accepted, this Pool will be converted into a Deal, and the Issuer will be notified that you have agreed to underwrite this Deal."),r().createElement("div",{className:"modalsubmit"},r().createElement("div",{className:"submitbuttonbg"},r().createElement("div",{className:"row"},r().createElement("div",{className:"row justify-content-accept"},r().createElement("button",{type:"button",className:"closePopup",onClick:this.onCloseModal}," ","Cancel"," "),r().createElement(c.c,{variant:"contained",color:"primary",onClick:()=>this.UpdatePoolUWStatus("Accepted By RatingAgency",this.state.value)},"Accept",!0===this.state.formLoader?r().createElement(h.c,{size:"22px",color:"primary"}):""))))),!1===this.state.getLoansLoader?"":r().createElement(f.c,null)))))),r().createElement("div",{id:"modal"},r().createElement(g(),{isOpen:this.state.open2,onRequestClose:this.onCloseModal1,contentLabel:"Minimal Modal Example",style:b.YT},r().createElement(r().Fragment,null,r().createElement("div",{className:"modalPopup2"},r().createElement("h2",null,"Are you sure you want to Reject the Pool?"),r().createElement("div",{className:"modalshiftcontent"},r().createElement("p",null,"Once rejected, the Issuer will be notified that you have denied to underwrite this Deal."),r().createElement("div",{className:"input-container"},r().createElement("label",{className:"label"},"Note (Optional)"),r().createElement("input",{placeholder:"Type here",className:"input",type:"text",onChange:e=>{this.setState({formData:{...this.state.formData,note:e.target.value}})},value:this.state.formData.note})),r().createElement("div",{className:"submitbuttonbg"},r().createElement("div",{className:"row"},r().createElement("div",{className:"row justify-content-reject"},r().createElement("button",{type:"button",className:"closePopup",onClick:this.onCloseModal1}," ","Cancel"," "),r().createElement(c.c,{variant:"contained",color:"primary",onClick:()=>this.UpdatePoolUWStatus("Rejected By RatingAgency",this.state.value)},"Reject",!0===this.state.formLoader?r().createElement(h.c,{size:"22px",color:"primary"}):"")))),!1===this.state.getLoansLoader?"":r().createElement(f.c,null))))))):this.handleClickSubmitted())}}const T=(0,p.withSnackbar)(D)}}]);